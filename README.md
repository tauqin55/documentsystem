# 文本转大写工具 - 前后端分离原型

这是一个极简的前后端分离原型项目，演示了前端与后端的基本交互。

## 功能说明

- **文本输入转换**：前端输入文字，点击按钮调用后端接口，后端将文字转为大写后返回，前端展示转换结果
- **文件上传转换**：前端选择文本文件上传，后端读取文件内容并转换为大写，前端展示转换结果

## 技术栈

- **后端**：Node.js + Express
- **前端**：纯 HTML + JavaScript
- **无数据库依赖**：所有逻辑仅在内存中处理

## 项目结构

```
documentsystem/
├── server.js      # 后端服务器文件
├── index.html     # 前端页面文件
├── package.json   # 项目配置文件
└── README.md      # 说明文档
```

## 运行步骤

### 第一步：初始化项目（首次运行）

在项目根目录下打开终端，执行以下命令：

```bash
npm init -y
```

此命令会生成 `package.json` 文件（如果还没有的话）。

### 第二步：安装依赖

执行以下命令安装所需的依赖包：

```bash
npm install express cors multer
```

依赖说明：
- `express`：Node.js Web 框架，用于创建后端服务器
- `cors`：跨域资源共享中间件，用于处理跨域请求
- `multer`：文件上传中间件，用于处理文件上传请求

### 第三步：启动后端服务器

执行以下命令启动后端服务器：

```bash
node server.js
```

或者使用 npm 脚本：

```bash
npm start
```

启动成功后，终端会显示：
```
后端服务器已启动，运行在 http://localhost:3000
健康检查接口：http://localhost:3000/health
文本转大写接口：http://localhost:3000/api/uppercase
文件上传接口：http://localhost:3000/api/uppercase-file
```

**注意**：请保持后端服务器运行，不要关闭终端窗口。

### 第四步：打开前端页面

后端服务器启动后，直接双击 `index.html` 文件，浏览器会自动打开页面。

或者，你也可以在浏览器地址栏输入：
```
file:///d:/documentsystem/index.html
```
（请根据你的实际路径调整）

## 使用说明

### 文本输入转换

1. 在输入框中输入要转换的文本
2. 点击"转换为大写"按钮，或按回车键
3. 转换结果会显示在下方的结果区域
4. 如果出现错误，错误信息会显示在结果区域下方

### 文件上传转换

1. 点击"选择文件"按钮，选择要转换的文本文件
2. 支持的文件类型：`.txt`, `.html`, `.css`, `.js`, `.json`, `.csv`, `.xml`, `.md` 等文本文件
3. 文件大小限制：最大 10MB
4. 选择文件后，点击"上传并转换为大写"按钮
5. 转换结果会显示在文件转换结果区域
6. 如果出现错误，错误信息会显示在结果区域下方

## API 接口说明

### POST /api/uppercase

将文本转换为大写。

**请求体：**
```json
{
  "text": "hello world"
}
```

**成功响应：**
```json
{
  "success": true,
  "result": "HELLO WORLD"
}
```

**错误响应：**
```json
{
  "success": false,
  "error": "错误信息"
}
```

### POST /api/uppercase-file

上传文件并将文件内容转换为大写。

**请求格式：** `multipart/form-data`

**请求参数：**
- `file`：要上传的文件（文件字段）

**成功响应：**
```json
{
  "success": true,
  "result": "文件内容转换为大写后的文本",
  "fileName": "原文件名.txt",
  "originalLength": 100,
  "convertedLength": 100
}
```

**错误响应：**
```json
{
  "success": false,
  "error": "错误信息"
}
```

**注意事项：**
- 支持的文件类型：文本文件（.txt, .html, .css, .js, .json, .csv, .xml, .md 等）
- 文件大小限制：最大 10MB
- 文件编码：建议使用 UTF-8 编码

### GET /health

健康检查接口，用于测试服务器是否正常运行。

**响应：**
```json
{
  "success": true,
  "message": "服务器运行正常"
}
```

## 常见问题

### 1. 无法连接到服务器

**问题**：前端页面显示"网络错误：无法连接到服务器"

**解决方法**：
- 确保后端服务器已启动（`node server.js`）
- 检查后端服务器是否运行在 `http://localhost:3000`
- 检查浏览器控制台是否有错误信息

### 2. 端口被占用

**问题**：启动后端时提示端口 3000 已被占用

**解决方法**：
- 修改 `server.js` 中的 `PORT` 变量为其他端口（如 3001）
- 同时修改 `index.html` 中的 API 地址为新的端口

### 3. 跨域错误

**问题**：浏览器控制台显示 CORS 错误

**解决方法**：
- 确保已安装 `cors` 包：`npm install cors`
- 检查 `server.js` 中是否已配置 CORS 中间件

### 4. 文件上传失败

**问题**：上传文件时提示"不支持的文件类型"

**解决方法**：
- 确保上传的是文本文件（.txt, .html, .css, .js, .json, .csv, .xml, .md 等）
- 检查文件大小是否超过 10MB 限制
- 确保文件是 UTF-8 编码（或常见文本编码）

### 5. 文件内容显示乱码

**问题**：文件转换后显示乱码

**解决方法**：
- 确保文件使用 UTF-8 编码保存
- 某些特殊编码的文件可能无法正确读取，建议转换为 UTF-8 编码

## 注意事项

- 后端服务器必须保持运行状态，前端才能正常工作
- 本项目仅用于演示，不包含数据库和持久化存储
- 生产环境使用时，建议添加更多的安全措施和错误处理
